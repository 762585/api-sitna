TC.Layer=function(t){var e=this;e.options=t||{},$.extend(e,e.options),e.id=e.options.id||TC.getUID(),e.map=e.options.map,e.type=e.options.type||TC.Consts.layerType.WMS;var i=e.options.isBase?TC.Consts.mimeType.JPEG:TC.Consts.mimeType.PNG;e.options.format=e.options.format||i,void 0===e.options.hideTree&&(e.options.hideTree=!0),void 0===e.options.hideTitle&&(e.options.hideTitle=!1),e._cache={visibilityStates:{}},e.tree=null,e.wrap=null},TC.Layer.state={IDLE:"idle",LOADING:"loading"},TC.Layer.prototype.setVisibility=function(t){this.wrap.setVisibility(t)},TC.Layer.prototype.getVisibility=function(){var t=this,e=!1;return t.map&&(t.isBase&&t.map.getBaseLayer()!==t||(e=t.wrap.getVisibility())),e},TC.Layer.prototype.getOpacity=function(){var t=this,e=!1;return t.map&&(t.isBase&&t.map.getBaseLayer()!==t||(e=t.wrap.getLayer().getOpacity())),e},TC.Layer.prototype.setOpacity=function(t,e){var i=this;$.when(this.wrap.getLayer()).then(function(o){o.setOpacity(t),i.map&&!e&&i.map.$events.trigger($.Event(TC.Consts.event.LAYEROPACITY,{layer:i,opacity:t}))})},TC.Layer.prototype.isCompatible=function(t){return!0},TC.Layer.prototype.isValidFromNames=function(){return!0},TC.Layer.prototype.isRaster=function(){var t=!0,e=this;switch(e.type){case TC.Consts.layerType.VECTOR:case TC.Consts.layerType.KML:case TC.Consts.layerType.WFS:case TC.Consts.layerType.GROUP:t=!1}return t},TC.Layer.prototype.isVisibleByScale=function(t){return!0},TC.Layer.prototype.isVisibleByName=function(t){return!0},TC.Layer.prototype.getTree=function(){var t=this,e={name:t.name,title:t.title};return e},TC.Layer.prototype.findNode=function t(e,i){var o=null;if(i.uid==e)o=i;else for(var r=0;r<i.children.length;r++){var s=t(e,i.children[r]);if(s){o=s;break}}return o},TC.Layer.prototype.setNodeVisibility=function(t,e){this.setVisibility(e)},TC.Layer.prototype.getNodeVisibility=function(t){return TC.Consts.visibility.VISIBLE},TC.Layer.prototype.getResolutions=function(){return this.wrap.getResolutions?this.wrap.getResolutions():[]};