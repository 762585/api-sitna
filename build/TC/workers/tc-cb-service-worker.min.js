!function(){self.addEventListener("install",function(e){var n="TC.offline.map.";e.waitUntil(caches.open(n).then(function(e){e.keys().then(function(e){console.log("Revisando cache..."),fetch(e[0]).then(function(){caches["delete"](n).then(function(){console.log("Cache con bug borrada")})},function(e){console.log(e)})})}))}),self.addEventListener("activate",function(e){e.waitUntil(self.clients.claim())}),self.addEventListener("fetch",function(e){e.respondWith(caches.match(e.request).then(function(n){return n?n:fetch(e.request)["catch"](function(n){console.log("[fetch] Could not fetch "+e.request.url+": "+n)})}))});var e={};self.addEventListener("message",function(n){var t=function(e){self.clients.matchAll().then(function(n){n.forEach(function(n){n.postMessage(e)})})},c=n.data.action;switch(c){case"create":var a=n.data.name,o=n.data.silent;e[a]=c;var i=function(){caches.open(a).then(function(i){var s=n.data.list,l=s.length,f=0;s.forEach(function(n){e[a]&&i.add(n).then(function(){o||(t({action:c,name:a,event:"progress",count:++f,total:l}),f===l&&t({action:c,name:a,event:"cached"}))},function(){t({action:c,name:a,event:"error",url:n})})})})};caches["delete"](a).then(i,i);break;case"delete":var a=n.data.name,o=n.data.silent;delete e[a],caches["delete"](a).then(function(){o||t({action:c,name:a,event:"deleted"})},function(){t({action:c,name:a,event:"error"})})}})}();