TC.control=TC.control||{},TC.Consts.classes.PRINTABLE="tc-printable",TC.control.Print=function(t){var e=this,n=t||{};if(e.ready=!1,e.title=n.title||"Página de impresión",e.cssUrl=n.cssUrl||TC.apiLocation+"TC/css/print.css",n.target){for(var r in e.template)dust.cache[r]||e.template[r]();var l=$(n.target);l.addClass(TC.Consts.classes.PRINTABLE);var s=function(t){var n=open(null,e.CLASS),r=l.html();dust.render(e.CLASS+"-page",{title:e.title,content:r,cssUrl:e.cssUrl},function(t,e){n.document.write(e),n.document.close(),n.focus(),t&&TC.error(t)})};dust.render(e.CLASS,null,function(t,n){l.append(n),l.find("."+e.CLASS+"-btn").on("click",s)})}},function(){var t=TC.control.Print.prototype;t.CLASS="tc-ctl-print",t.template={},t.template[t.CLASS]=function(){function e(t,e){return t.w('<a class="tc-ctl-print-btn" title="').h("i18n",e,{},{$key:"printThisWindow"}).w('">').h("i18n",e,{},{$key:"print"}).w("</a>")}return dust.register(t.CLASS,e),e.__dustBody=!0,e},t.template[t.CLASS+"-page"]=function(){function e(t,e){return t.w('<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>').f(e.get(["title"],!1),e,"h").w('</title><link rel="stylesheet" href="').f(e.get(["cssUrl"],!1),e,"h").w('" /></head><body onload="print()" class="tc-ctl-print-page"><h1>').f(e.get(["title"],!1),e,"h").w("</h1>").f(e.get(["content"],!1),e,"h",["s"]).w("</body></html>")}return dust.register(t.CLASS+"-page",e),e.__dustBody=!0,e}}();