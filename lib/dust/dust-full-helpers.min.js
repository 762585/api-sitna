(function(A,t){"function"===typeof define&&define.amd&&!0===define.amd.dust?define("dust.core",[],t):"object"===typeof exports?module.exports=t():A.dust=t()})(this,function(){function A(b,B){if(b){if("function"===typeof b&&b.template)return b.template;if(a.isTemplateFn(b))return b;if(!1!==B)return a.cache[b]}}function t(b,B,r){if(!b)return B.setError(Error("No template or template name provided to render"));var f=A(b,a.config.cache);return f?f(B,v.wrap(r,f.templateName)):a.onLoad?B.map(function(B){function f(d,
b){var h;if(d)return B.setError(d);h=A(b,!1)||A(g,a.config.cache);if(!h)if(a.compile)h=a.loadSource(a.compile(b,g));else return B.setError(Error("Dust compiler not available"));h(B,v.wrap(r,h.templateName)).end()}var g=b;if(3===a.onLoad.length)a.onLoad(g,r.options,f);else a.onLoad(g,f)}):B.setError(Error("Template Not Found: "+b))}function v(b,a,r,f,g){void 0===b||b instanceof N||(b=new N(b));this.stack=b;this.global=a;this.options=r;this.blocks=f;this.templateName=g}function g(b,a,r){return function(f){return b.push(f)._get(a,
r)}}function N(b,a,r,f){this.tail=a;this.isObject=b&&"object"===typeof b;this.head=b;this.index=r;this.of=f}function h(b){this.head=new e(this);this.callback=b;this.out=""}function u(){this.head=new e(this)}function e(b,a,r){this.root=b;this.next=a;this.data=[];this.flushable=!1;this.taps=r}function n(b,a){this.head=b;this.tail=a}var a={version:"2.7.1"},K=function(){};a.config={whitespace:!1,amd:!1,cjs:!1,cache:!0};a._aliases={write:"w",end:"e",map:"m",render:"r",reference:"f",section:"s",exists:"x",
notexists:"nx",block:"b",partial:"p",helper:"h"};(function(){var b={DEBUG:0,INFO:1,WARN:2,ERROR:3,NONE:4},f,r;"undefined"!==typeof console&&console.log?(f=console.log,r="function"===typeof f?function(){f.apply(console,arguments)}:function(){f(Array.prototype.slice.apply(arguments).join(" "))}):r=K;a.log=function(f,B){B=B||"INFO";b[B]>=b[a.debugLevel]&&r("[DUST:"+B+"]",f)};a.debugLevel="NONE";"undefined"!==typeof process&&process.env&&/\bdust\b/.test(process.env.DEBUG)&&(a.debugLevel="DEBUG")})();
a.helpers={};a.cache={};a.register=function(b,f){b&&(f.templateName=b,!1!==a.config.cache&&(a.cache[b]=f))};a.render=function(b,a,f){f=(new h(f)).head;try{t(b,f,a).end()}catch(g){f.setError(g)}};a.stream=function(b,f){var r=new u,g=r.head;a.nextTick(function(){try{t(b,g,f).end()}catch(a){g.setError(a)}});return r};a.loadSource=function(b){return eval(b)};a.isArray=Array.isArray?Array.isArray:function(b){return"[object Array]"===Object.prototype.toString.call(b)};a.nextTick=function(){return function(b){setTimeout(b,
0)}}();a.isEmpty=function(b){return 0===b?!1:a.isArray(b)&&!b.length?!0:!b};a.isEmptyObject=function(b){var a;if(null===b||void 0===b||0<b.length)return!1;for(a in b)if(Object.prototype.hasOwnProperty.call(b,a))return!1;return!0};a.isTemplateFn=function(b){return"function"===typeof b&&b.__dustBody};a.isThenable=function(b){return b&&"object"===typeof b&&"function"===typeof b.then};a.isStreamable=function(b){return b&&"function"===typeof b.on};a.filter=function(b,f,r){var g,h,e;if(r)for(g=0,h=r.length;g<
h;g++)e=r[g],"s"===e?f=null:"function"===typeof a.filters[e]?b=a.filters[e](b):a.log("Invalid filter `"+e+"`","WARN");f&&(b=a.filters[f](b));return b};a.filters={h:function(b){return a.escapeHtml(b)},j:function(b){return a.escapeJs(b)},u:encodeURI,uc:encodeURIComponent,js:function(b){return a.escapeJSON(b)},jp:function(b){if(JSON)return JSON.parse(b);a.log("JSON is undefined; could not parse `"+b+"`","WARN");return b}};a.makeBase=a.context=function(b,a){return new v(void 0,b,a)};v.wrap=function(b,
a){return b instanceof v?b:new v(b,{},{},null,a)};v.prototype.get=function(b,a){"string"===typeof b&&("."===b[0]&&(a=!0,b=b.substr(1)),b=b.split("."));return this._get(a,b)};v.prototype._get=function(b,f){var r=this.stack||{},h=1,e,n,u,d;n=f[0];u=f.length;if(b&&0===u)d=r,r=r.head;else{if(b)r&&(r=r.head?r.head[n]:void 0);else{for(;r&&(!r.isObject||(d=r.head,e=r.head[n],void 0===e));)r=r.tail;r=void 0!==e?e:this.global&&this.global[n]}for(;r&&h<u;){if(a.isThenable(r))return r.then(g(this,b,f.slice(h)));
d=r;r=r[f[h]];h++}}if("function"===typeof r)return h=function(){try{return r.apply(d,arguments)}catch(b){throw a.log(b,"ERROR"),b;}},h.__dustBody=!!r.__dustBody,h;void 0===r&&a.log("Cannot find reference `{"+f.join(".")+"}` in template `"+this.getTemplateName()+"`","INFO");return r};v.prototype.getPath=function(b,a){return this._get(b,a)};v.prototype.push=function(b,f,r){return void 0===b?(a.log("Not pushing an undefined variable onto the context","INFO"),this):this.rebase(new N(b,this.stack,f,r))};
v.prototype.pop=function(){var b=this.current();this.stack=this.stack&&this.stack.tail;return b};v.prototype.rebase=function(b){return new v(b,this.global,this.options,this.blocks,this.getTemplateName())};v.prototype.clone=function(){var b=this.rebase();b.stack=this.stack;return b};v.prototype.current=function(){return this.stack&&this.stack.head};v.prototype.getBlock=function(b){var f,r,g;"function"===typeof b&&(b=b(new e,this).data.join(""));f=this.blocks;if(!f)return a.log("No blocks for context `"+
b+"` in template `"+this.getTemplateName()+"`","DEBUG"),!1;for(r=f.length;r--;)if(g=f[r][b])return g;a.log("Malformed template `"+this.getTemplateName()+"` was missing one or more blocks.");return!1};v.prototype.shiftBlocks=function(b){var a=this.blocks;return b?(b=a?a.concat([b]):[b],new v(this.stack,this.global,this.options,b,this.getTemplateName())):this};v.prototype.resolve=function(b){if("function"!==typeof b)return b;b=(new e).render(b,this);return b instanceof e?b.data.join(""):b};v.prototype.getTemplateName=
function(){return this.templateName};h.prototype.flush=function(){for(var b=this.head;b;){if(b.flushable)this.out+=b.data.join("");else{b.error&&(this.callback(b.error),a.log("Rendering failed with error `"+b.error+"`","ERROR"),this.flush=K);return}this.head=b=b.next}this.callback(null,this.out)};u.prototype.flush=function(){for(var b=this.head;b;){if(b.flushable)this.emit("data",b.data.join(""));else{b.error&&(this.emit("error",b.error),this.emit("end"),a.log("Streaming failed with error `"+b.error+
"`","ERROR"),this.flush=K);return}this.head=b=b.next}this.emit("end")};u.prototype.emit=function(b,f){var r=(this.events||{})[b]||[],g,h;if(!r.length)return a.log("Stream broadcasting, but no listeners for `"+b+"`","DEBUG"),!1;r=r.slice(0);g=0;for(h=r.length;g<h;g++)r[g](f);return!0};u.prototype.on=function(b,f){var r=this.events=this.events||{},r=r[b]=r[b]||[];"function"!==typeof f?a.log("No callback function provided for `"+b+"` event listener","WARN"):r.push(f);return this};u.prototype.pipe=function(b){if("function"!==
typeof b.write||"function"!==typeof b.end)return a.log("Incompatible stream passed to `pipe`","WARN"),this;var f=!1;"function"===typeof b.emit&&b.emit("pipe",this);if("function"===typeof b.on)b.on("error",function(){f=!0});return this.on("data",function(r){if(!f)try{b.write(r,"utf8")}catch(g){a.log(g,"ERROR")}}).on("end",function(){if(!f)try{b.end(),f=!0}catch(r){a.log(r,"ERROR")}})};e.prototype.write=function(b){var a=this.taps;a&&(b=a.go(b));this.data.push(b);return this};e.prototype.end=function(b){b&&
this.write(b);this.flushable=!0;this.root.flush();return this};e.prototype.map=function(b){var f=new e(this.root,this.next,this.taps),r=new e(this.root,f,this.taps);this.next=r;this.flushable=!0;try{b(r)}catch(g){a.log(g,"ERROR"),r.setError(g)}return f};e.prototype.tap=function(b){var a=this.taps;this.taps=a?a.push(b):new n(b);return this};e.prototype.untap=function(){this.taps=this.taps.tail;return this};e.prototype.render=function(b,a){return b(this,a)};e.prototype.reference=function(b,f,r,g){return"function"===
typeof b?(b=b.apply(f.current(),[this,f,null,{auto:r,filters:g}]),b instanceof e?b:this.reference(b,f,r,g)):a.isThenable(b)?this.await(b,f,null,r,g):a.isStreamable(b)?this.stream(b,f,null,r,g):a.isEmpty(b)?this:this.write(a.filter(b,r,g))};e.prototype.section=function(b,f,g,h){var n=g.block,u=g["else"],w=this;if("function"===typeof b&&!a.isTemplateFn(b)){try{b=b.apply(f.current(),[this,f,g,h])}catch(d){return a.log(d,"ERROR"),this.setError(d)}if(b instanceof e)return b}a.isEmptyObject(h)||(f=f.push(h));
if(a.isArray(b)){if(n){g=b.length;if(0<g){h=f.stack&&f.stack.head||{};h.$len=g;for(u=0;u<g;u++)h.$idx=u,w=n(w,f.push(b[u],u,g));h.$idx=void 0;h.$len=void 0;return w}if(u)return u(this,f)}}else{if(a.isThenable(b))return this.await(b,f,g);if(a.isStreamable(b))return this.stream(b,f,g);if(!0===b){if(n)return n(this,f)}else if(b||0===b){if(n)return n(this,f.push(b))}else if(u)return u(this,f)}a.log("Section without corresponding key in template `"+f.getTemplateName()+"`","DEBUG");return this};e.prototype.exists=
function(b,f,g){var h=g.block;g=g["else"];if(!a.isEmpty(b)){if(h)return h(this,f);a.log("No block for exists check in template `"+f.getTemplateName()+"`","DEBUG")}else if(g)return g(this,f);return this};e.prototype.notexists=function(b,f,g){var h=g.block;g=g["else"];if(a.isEmpty(b)){if(h)return h(this,f);a.log("No block for not-exists check in template `"+f.getTemplateName()+"`","DEBUG")}else if(g)return g(this,f);return this};e.prototype.block=function(b,a,f){return(b=b||f.block)?b(this,a):this};
e.prototype.partial=function(b,f,g,h){var e;void 0===h&&(h=g,g=f);a.isEmptyObject(h)||(g=g.clone(),e=g.pop(),g=g.push(h).push(e));if(a.isTemplateFn(b))return this.capture(b,f,function(b,a){g.templateName=b;t(b,a,g).end()});g.templateName=b;return t(b,this,g)};e.prototype.helper=function(b,f,g,h){var e;if(a.helpers[b])try{return e=a.helpers[b](this,f,g,h),a.isThenable(e)?this.await(e,f,g):e}catch(n){return a.log("Error in helper `"+b+"`: "+n.message,"ERROR"),this.setError(n)}else return a.log("Helper `"+
b+"` does not exist","WARN"),this};e.prototype.await=function(b,f,g,h,e){var n=g&&g.block,u=g&&g.error;return this.map(function(d){b.then(function(b){n?d.render(n,f.push(b)).end():d.reference(b,f,h,e).end()},function(b){u?d.render(u,f.push(b)).end():(a.log("Unhandled promise rejection in `"+f.getTemplateName()+"`"),d.end())})})};e.prototype.stream=function(b,f,g,h,e){var n=g&&g.block,u=g&&g.error;return this.map(function(d){var g=!1;b.on("data",function(b){g||(d=n?d.map(function(d){d.render(n,f.push(b)).end()}):
d.reference(b,f,h,e))}).on("error",function(b){g||(u?d.render(u,f.push(b)):a.log("Unhandled stream error in `"+f.getTemplateName()+"`"),g||(g=!0,d.end()))}).on("end",function(){g||(g=!0,d.end())})})};e.prototype.capture=function(b,f,a){return this.map(function(g){var e=new h(function(b,f){b?g.setError(b):a(f,g)});b(e.head,f).end()})};e.prototype.setError=function(b){this.error=b;this.root.flush();return this};for(var I in e.prototype)a._aliases[I]&&(e.prototype[a._aliases[I]]=e.prototype[I]);n.prototype.push=
function(b){return new n(b,this)};n.prototype.go=function(b){for(var f=this;f;)b=f.head(b),f=f.tail;return b};var E=/[&<>"']/,D=/&/g,O=/</g,J=/>/g,R=/\"/g,L=/\'/g;a.escapeHtml=function(b){return"string"===typeof b||b&&"function"===typeof b.toString?("string"!==typeof b&&(b=b.toString()),E.test(b)?b.replace(D,"&amp;").replace(O,"&lt;").replace(J,"&gt;").replace(R,"&quot;").replace(L,"&#39;"):b):b};var w=/\\/g,f=/\//g,y=/\r/g,F=/\u2028/g,S=/\u2029/g,ba=/\n/g,ca=/\f/g,da=/'/g,X=/"/g,Y=/\t/g;a.escapeJs=
function(b){return"string"===typeof b?b.replace(w,"\\\\").replace(f,"\\/").replace(X,'\\"').replace(da,"\\'").replace(y,"\\r").replace(F,"\\u2028").replace(S,"\\u2029").replace(ba,"\\n").replace(ca,"\\f").replace(Y,"\\t"):b};a.escapeJSON=function(b){if(JSON)return JSON.stringify(b).replace(F,"\\u2028").replace(S,"\\u2029").replace(O,"\\u003c");a.log("JSON is undefined; could not escape `"+b+"`","WARN");return b};return a});
(function(A,t){"function"===typeof define&&define.amd&&!0===define.amd.dust?define("dust.parse",["dust.core"],function(v){return t(v).parse}):"object"===typeof exports?module.exports=t(require("./dust")):t(A.dust)})(this,function(A){var t=function(){function t(g,v,h,u,e,n){this.message=g;this.expected=v;this.found=h;this.offset=u;this.line=e;this.column=n;this.name="SyntaxError"}(function(g,t){function h(){this.constructor=g}h.prototype=t.prototype;g.prototype=new h})(t,Error);return{SyntaxError:t,
parse:function(g){function A(c){if(Z!==c){Z>c&&(Z=0,la={line:1,column:1,seenCR:!1});var d=la,b,f;for(b=Z;b<c;b++)f=g.charAt(b),"\n"===f?(d.seenCR||d.line++,d.column=1,d.seenCR=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(d.line++,d.column=1,d.seenCR=!0):(d.column++,d.seenCR=!1);Z=c}return la}function h(d){c<ea||(c>ea&&(ea=c,ma=[]),ma.push(d))}function u(c,d,b){function f(c){var d=1;for(c.sort(function(c,d){return c.description<d.description?-1:c.description>d.description?1:0});d<c.length;)c[d-1]===c[d]?
c.splice(d,1):d++}function a(c,d){function p(c){function d(c){return c.charCodeAt(0).toString(16).toUpperCase()}return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(c){return"\\x0"+d(c)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(c){return"\\x"+d(c)}).replace(/[\u0180-\u0FFF]/g,function(c){return"\\u0"+d(c)}).replace(/[\u1080-\uFFFF]/g,function(c){return"\\u"+
d(c)})}var b=Array(c.length),q;for(q=0;q<c.length;q++)b[q]=c[q].description;b=1<c.length?b.slice(0,-1).join(", ")+" or "+b[c.length-1]:b[0];q=d?'"'+p(d)+'"':"end of input";return"Expected "+b+" but "+q+" found."}var l=A(b),m=b<g.length?g.charAt(b):null;null!==d&&f(d);return new t(null!==c?c:a(d,m),d,m,b,l.line,l.column)}function e(){return n()}function n(){var p,b,q;p=c;b=[];for(q=a();q!==d;)b.push(q),q=a();b!==d&&(x=p,p=["body"].concat(b),b=G(p));return b}function a(){var p;p=X();if(p===d&&(p=Y(),
p===d)){var z,q,a,k;l++;p=c;z=K();if(z!==d){q=[];for(a=C();a!==d;)q.push(a),a=C();if(q!==d)if(a=r(),a!==d)if(q=n(),q!==d){var e,w,y;l++;a=c;k=[];e=c;w=B();w!==d?(58===g.charCodeAt(c)?(w=na,c++):(w=d,0===l&&h(oa)),w!==d?(w=f(),w!==d?(y=r(),y!==d?(y=n(),y!==d?(x=e,e=w=fa(w,y)):(c=e,e=m)):(c=e,e=m)):(c=e,e=m)):(c=e,e=m)):(c=e,e=m);for(;e!==d;)k.push(e),e=c,w=B(),w!==d?(58===g.charCodeAt(c)?(w=na,c++):(w=d,0===l&&h(oa)),w!==d?(w=f(),w!==d?(y=r(),y!==d?(y=n(),y!==d?(x=e,e=w=fa(w,y)):(c=e,e=m)):(c=e,e=
m)):(c=e,e=m)):(c=e,e=m)):(c=e,e=m);k!==d&&(x=a,k=["bodies"].concat(k));a=k;l--;a===d&&0===l&&h(Ia);if(a!==d){l++;k=c;e=B();if(e!==d)if(47===g.charCodeAt(c)?(e=pa,c++):(e=d,0===l&&h(qa)),e!==d){w=[];for(e=C();e!==d;)w.push(e),e=C();if(w!==d)if(e=J(),e!==d){w=[];for(y=C();y!==d;)w.push(y),y=C();w!==d?(y=r(),y!==d?(x=k,k=e):(c=k,k=m)):(c=k,k=m)}else c=k,k=m;else c=k,k=m}else c=k,k=m;else c=k,k=m;l--;k===d&&0===l&&h(Ja);k===d&&(k=aa);if(k!==d){x=c;if(!k||z[1].text!==k.text)throw u("Expected end tag for "+
z[1].text+" but it was not found.",null,x);k=H;k!==d?(x=p,p=z,a.push(["param",["literal","block"],q]),p.push(a),p=z=G(p)):(c=p,p=m)}else c=p,p=m}else c=p,p=m}else c=p,p=m;else c=p,p=m;else c=p,p=m}else c=p,p=m;if(p===d)if(p=c,z=K(),z!==d){q=[];for(a=C();a!==d;)q.push(a),a=C();q!==d?(47===g.charCodeAt(c)?(a=pa,c++):(a=d,0===l&&h(qa)),a!==d?(q=r(),q!==d?(x=p,p=z,p.push(["bodies"]),p=z=G(p)):(c=p,p=m)):(c=p,p=m)):(c=p,p=m)}else c=p,p=m;l--;p===d&&0===l&&h(Ha);if(p===d){l++;p=c;z=B();if(z!==d)if(62===
g.charCodeAt(c)?(z=Ka,c++):(z=d,0===l&&h(La)),z===d&&(43===g.charCodeAt(c)?(z=Ma,c++):(z=d,0===l&&h(Na))),z!==d){a=[];for(q=C();q!==d;)a.push(q),q=C();if(a!==d)if(q=c,a=f(),a!==d&&(x=q,a=["literal",a]),q=a,q===d&&(q=S()),q!==d)if(a=I(),a!==d)if(k=E(),k!==d){e=[];for(w=C();w!==d;)e.push(w),w=C();e!==d?(47===g.charCodeAt(c)?(w=pa,c++):(w=d,0===l&&h(qa)),w!==d?(e=r(),e!==d?(x=p,p=z=G([">"===z?"partial":z,q,a,k])):(c=p,p=m)):(c=p,p=m)):(c=p,p=m)}else c=p,p=m;else c=p,p=m;else c=p,p=m;else c=p,p=m}else c=
p,p=m;else c=p,p=m;l--;p===d&&0===l&&h(Oa);if(p===d&&(p=O(),p===d&&(p=D(),p===d))){l++;p=c;z=Q();if(z!==d){q=[];for(k=C();k!==d;)q.push(k),k=C();q!==d?(x=p,p=z=G(["format",z,q.join("")])):(c=p,p=m)}else c=p,p=m;if(p===d){p=c;z=[];k=q=c;l++;a=b();l--;a===d?k=H:(c=k,k=m);k!==d?(a=c,l++,k=X(),l--,k===d?a=H:(c=a,a=m),a!==d?(k=c,l++,a=Y(),l--,a===d?k=H:(c=k,k=m),k!==d?(a=c,l++,k=Q(),l--,k===d?a=H:(c=a,a=m),a!==d?(g.length>c?(k=g.charAt(c),c++):(k=d,0===l&&h(P)),k!==d?(x=q,q=k):(c=q,q=m)):(c=q,q=m)):(c=
q,q=m)):(c=q,q=m)):(c=q,q=m);if(q!==d)for(;q!==d;)z.push(q),k=q=c,l++,a=b(),l--,a===d?k=H:(c=k,k=m),k!==d?(a=c,l++,k=X(),l--,k===d?a=H:(c=a,a=m),a!==d?(k=c,l++,a=Y(),l--,a===d?k=H:(c=k,k=m),k!==d?(a=c,l++,k=Q(),l--,k===d?a=H:(c=a,a=m),a!==d?(g.length>c?(k=g.charAt(c),c++):(k=d,0===l&&h(P)),k!==d?(x=q,q=k):(c=q,q=m)):(c=q,q=m)):(c=q,q=m)):(c=q,q=m)):(c=q,q=m);else z=m;z!==d&&(x=p,z=G(["buffer",z.join("")]));p=z}l--;p===d&&0===l&&h(Pa)}}}return p}function K(){var p,b,a,f,k;p=c;b=B();if(b!==d)if(Qa.test(g.charAt(c))?
(b=g.charAt(c),c++):(b=d,0===l&&h(Ra)),b!==d){a=[];for(f=C();f!==d;)a.push(f),f=C();a!==d?(f=J(),f!==d?(a=I(),a!==d?(k=E(),k!==d?(x=p,p=b=[b,f,a,k]):(c=p,p=m)):(c=p,p=m)):(c=p,p=m)):(c=p,p=m)}else c=p,p=m;else c=p,p=m;return p}function I(){var p,b,a;b=p=c;58===g.charCodeAt(c)?(a=na,c++):(a=d,0===l&&h(oa));a!==d?(a=J(),a!==d?(x=b,b=a):(c=b,b=m)):(c=b,b=m);b===d&&(b=aa);b!==d&&(x=p,b=b?["context",b]:["context"]);return b}function E(){var p,b,a,e,k;l++;p=c;b=[];a=c;e=[];k=C();if(k!==d)for(;k!==d;)e.push(k),
k=C();else e=m;e!==d?(k=f(),k!==d?(61===g.charCodeAt(c)?(e=va,c++):(e=d,0===l&&h(wa)),e!==d?(e=R(),e===d&&(e=J(),e===d&&(e=S())),e!==d?(x=a,a=e=fa(k,e)):(c=a,a=m)):(c=a,a=m)):(c=a,a=m)):(c=a,a=m);for(;a!==d;){b.push(a);a=c;e=[];k=C();if(k!==d)for(;k!==d;)e.push(k),k=C();else e=m;e!==d?(k=f(),k!==d?(61===g.charCodeAt(c)?(e=va,c++):(e=d,0===l&&h(wa)),e!==d?(e=R(),e===d&&(e=J(),e===d&&(e=S())),e!==d?(x=a,a=e=fa(k,e)):(c=a,a=m)):(c=a,a=m)):(c=a,a=m)):(c=a,a=m)}b!==d&&(x=p,b=["params"].concat(b));p=b;
l--;p===d&&0===l&&h(Sa);return p}function D(){var b,a,q,e;l++;b=c;a=B();if(a!==d)if(a=J(),a!==d){var k,n;l++;q=c;e=[];k=c;124===g.charCodeAt(c)?(n=xa,c++):(n=d,0===l&&h(ya));n!==d?(n=f(),n!==d?(x=k,k=n):(c=k,k=m)):(c=k,k=m);for(;k!==d;)e.push(k),k=c,124===g.charCodeAt(c)?(n=xa,c++):(n=d,0===l&&h(ya)),n!==d?(n=f(),n!==d?(x=k,k=n):(c=k,k=m)):(c=k,k=m);e!==d&&(x=q,e=["filters"].concat(e));q=e;l--;q===d&&0===l&&h(Ta);q!==d?(e=r(),e!==d?(x=b,b=a=G(["reference",a,q])):(c=b,b=m)):(c=b,b=m)}else c=b,b=m;
else c=b,b=m;l--;b===d&&0===l&&h(Ua);return b}function O(){var b,a,q;l++;b=c;a=B();a!==d?(126===g.charCodeAt(c)?(a=Va,c++):(a=d,0===l&&h(Wa)),a!==d?(a=f(),a!==d?(q=r(),q!==d?(x=b,b=a=G(["special",a])):(c=b,b=m)):(c=b,b=m)):(c=b,b=m)):(c=b,b=m);l--;b===d&&0===l&&h(Xa);return b}function J(){var b,a;l++;b=c;var q,e,k;l++;q=c;a=f();a===d&&(a=aa);if(a!==d){e=[];k=F();k===d&&(k=y());if(k!==d)for(;k!==d;)e.push(k),k=F(),k===d&&(k=y());else e=m;e!==d?(x=q,q=e[0],a&&q?(q.unshift(a),a=G([!1,q])):a=G([!0,q]),
q=a):(c=q,q=m)}else c=q,q=m;if(q===d)if(q=c,46===g.charCodeAt(c)?(a=ga,c++):(a=d,0===l&&h(ha)),a!==d){e=[];k=F();for(k===d&&(k=y());k!==d;)e.push(k),k=F(),k===d&&(k=y());e!==d?(x=q,q=a=0<e.length?G([!0,e[0]]):G([!0,[]])):(c=q,q=m)}else c=q,q=m;l--;q===d&&0===l&&h(Ya);a=q;a!==d&&(x=b,b=a,a=["path"].concat(b),a.text=b[1].join(".").replace(/,line,\d+,col,\d+/g,""));b=a;b===d&&(b=c,a=f(),a!==d&&(x=b,b=["key",a],b.text=a,a=b),b=a);l--;b===d&&0===l&&h(Za);return b}function R(){var b,a;l++;b=c;var f,e;l++;
a=c;f=w();f!==d?(46===g.charCodeAt(c)?(e=ga,c++):(e=d,0===l&&h(ha)),e!==d?(e=L(),e!==d?(x=a,a=f=parseFloat(f+"."+e)):(c=a,a=m)):(c=a,a=m)):(c=a,a=m);l--;a===d&&0===l&&h($a);a===d&&(a=w());a!==d&&(x=b,a=["literal",a]);b=a;l--;b===d&&0===l&&h(ab);return b}function L(){var b,a,f;l++;b=c;a=[];ia.test(g.charAt(c))?(f=g.charAt(c),c++):(f=d,0===l&&h(ja));if(f!==d)for(;f!==d;)a.push(f),ia.test(g.charAt(c))?(f=g.charAt(c),c++):(f=d,0===l&&h(ja));else a=m;a!==d&&(x=b,a=parseInt(a.join(""),10));b=a;l--;b===
d&&0===l&&h(bb);return b}function w(){var b;l++;var a;l++;b=c;45===g.charCodeAt(c)?(a=cb,c++):(a=d,0===l&&h(db));a!==d?(a=L(),a!==d?(x=b,b=-1*a):(c=b,b=m)):(c=b,b=m);l--;b===d&&0===l&&h(eb);b===d&&(b=L());l--;b===d&&0===l&&h(fb);return b}function f(){var b,a,f,e;l++;b=c;gb.test(g.charAt(c))?(a=g.charAt(c),c++):(a=d,0===l&&h(hb));if(a!==d){f=[];za.test(g.charAt(c))?(e=g.charAt(c),c++):(e=d,0===l&&h(Aa));for(;e!==d;)f.push(e),za.test(g.charAt(c))?(e=g.charAt(c),c++):(e=d,0===l&&h(Aa));f!==d?(x=b,b=
a+=f.join("")):(c=b,b=m)}else c=b,b=m;l--;b===d&&0===l&&h(ib);return b}function y(){var b,a,f,e,k;l++;a=b=c;91===g.charCodeAt(c)?(f=jb,c++):(f=d,0===l&&h(kb));if(f!==d){f=c;e=[];ia.test(g.charAt(c))?(k=g.charAt(c),c++):(k=d,0===l&&h(ja));if(k!==d)for(;k!==d;)e.push(k),ia.test(g.charAt(c))?(k=g.charAt(c),c++):(k=d,0===l&&h(ja));else e=m;e!==d&&(x=f,e=e.join(""));f=e;f===d&&(f=J());f!==d?(93===g.charCodeAt(c)?(e=lb,c++):(e=d,0===l&&h(mb)),e!==d?(x=a,a=f):(c=a,a=m)):(c=a,a=m)}else c=a,a=m;a!==d?(f=F(),
f===d&&(f=aa),f!==d?(x=b,b=a,(a=f)?a.unshift(b):a=[b],b=a):(c=b,b=m)):(c=b,b=m);l--;b===d&&0===l&&h(nb);return b}function F(){var b,a,e,n;l++;b=c;a=[];e=c;46===g.charCodeAt(c)?(n=ga,c++):(n=d,0===l&&h(ha));n!==d?(n=f(),n!==d?(x=e,e=n):(c=e,e=m)):(c=e,e=m);if(e!==d)for(;e!==d;)a.push(e),e=c,46===g.charCodeAt(c)?(n=ga,c++):(n=d,0===l&&h(ha)),n!==d?(n=f(),n!==d?(x=e,e=n):(c=e,e=m)):(c=e,e=m);else a=m;a!==d?(e=y(),e===d&&(e=aa),e!==d?(x=b,b=a,a=e?b.concat(e):b,b=a):(c=b,b=m)):(c=b,b=m);l--;b===d&&0===
l&&h(ob);return b}function S(){var b,a,f;l++;b=c;34===g.charCodeAt(c)?(a=T,c++):(a=d,0===l&&h(U));a!==d?(34===g.charCodeAt(c)?(a=T,c++):(a=d,0===l&&h(U)),a!==d?(x=b,b=a=G(["literal",""])):(c=b,b=m)):(c=b,b=m);if(b===d&&(b=c,34===g.charCodeAt(c)?(a=T,c++):(a=d,0===l&&h(U)),a!==d?(a=ca(),a!==d?(34===g.charCodeAt(c)?(f=T,c++):(f=d,0===l&&h(U)),f!==d?(x=b,b=a=G(["literal",a])):(c=b,b=m)):(c=b,b=m)):(c=b,b=m),b===d))if(b=c,34===g.charCodeAt(c)?(a=T,c++):(a=d,0===l&&h(U)),a!==d){a=[];f=ba();if(f!==d)for(;f!==
d;)a.push(f),f=ba();else a=m;a!==d?(34===g.charCodeAt(c)?(f=T,c++):(f=d,0===l&&h(U)),f!==d?(x=b,b=a=G(["body"].concat(a))):(c=b,b=m)):(c=b,b=m)}else c=b,b=m;l--;b===d&&0===l&&h(pb);return b}function ba(){var b,a;b=O();b===d&&(b=D(),b===d&&(b=c,a=ca(),a!==d&&(x=b,a=["buffer",a]),b=a));return b}function ca(){var a,f,e,n,k;l++;a=c;f=[];n=e=c;l++;k=b();l--;k===d?n=H:(c=n,n=m);n!==d?(k=da(),k===d&&(Ba.test(g.charAt(c))?(k=g.charAt(c),c++):(k=d,0===l&&h(Ca))),k!==d?(x=e,e=k):(c=e,e=m)):(c=e,e=m);if(e!==
d)for(;e!==d;)f.push(e),n=e=c,l++,k=b(),l--,k===d?n=H:(c=n,n=m),n!==d?(k=da(),k===d&&(Ba.test(g.charAt(c))?(k=g.charAt(c),c++):(k=d,0===l&&h(Ca))),k!==d?(x=e,e=n=k):(c=e,e=m)):(c=e,e=m);else f=m;f!==d&&(x=a,f=f.join(""));a=f;l--;a===d&&0===l&&h(qb);return a}function da(){var b,a;b=c;g.substr(c,2)===Da?(a=Da,c+=2):(a=d,0===l&&h(rb));a!==d&&(x=b,a='"');return a}function X(){var b,a,f,e,k;l++;b=c;g.substr(c,2)===Ea?(a=Ea,c+=2):(a=d,0===l&&h(sb));if(a!==d){a=[];e=f=c;l++;g.substr(c,2)===V?(k=V,c+=2):
(k=d,0===l&&h(ra));l--;k===d?e=H:(c=e,e=m);e!==d?(g.length>c?(k=g.charAt(c),c++):(k=d,0===l&&h(P)),k!==d?(x=f,f=k):(c=f,f=m)):(c=f,f=m);for(;f!==d;)a.push(f),e=f=c,l++,g.substr(c,2)===V?(k=V,c+=2):(k=d,0===l&&h(ra)),l--,k===d?e=H:(c=e,e=m),e!==d?(g.length>c?(k=g.charAt(c),c++):(k=d,0===l&&h(P)),k!==d?(x=f,f=e=k):(c=f,f=m)):(c=f,f=m);a!==d?(g.substr(c,2)===V?(f=V,c+=2):(f=d,0===l&&h(ra)),f!==d?(x=b,b=a=G(["raw",a.join("")])):(c=b,b=m)):(c=b,b=m)}else c=b,b=m;l--;b===d&&0===l&&h(tb);return b}function Y(){var b,
a,f,e,k;l++;b=c;g.substr(c,2)===Fa?(a=Fa,c+=2):(a=d,0===l&&h(ub));if(a!==d){a=[];e=f=c;l++;g.substr(c,2)===W?(k=W,c+=2):(k=d,0===l&&h(sa));l--;k===d?e=H:(c=e,e=m);e!==d?(g.length>c?(k=g.charAt(c),c++):(k=d,0===l&&h(P)),k!==d?(x=f,f=k):(c=f,f=m)):(c=f,f=m);for(;f!==d;)a.push(f),e=f=c,l++,g.substr(c,2)===W?(k=W,c+=2):(k=d,0===l&&h(sa)),l--,k===d?e=H:(c=e,e=m),e!==d?(g.length>c?(k=g.charAt(c),c++):(k=d,0===l&&h(P)),k!==d?(x=f,f=e=k):(c=f,f=m)):(c=f,f=m);a!==d?(g.substr(c,2)===W?(f=W,c+=2):(f=d,0===l&&
h(sa)),f!==d?(x=b,b=a=G(["comment",a.join("")])):(c=b,b=m)):(c=b,b=m)}else c=b,b=m;l--;b===d&&0===l&&h(vb);return b}function b(){var b,a,f,e,k,n,w,u,y,F;b=c;a=B();if(a!==d){f=[];for(e=C();e!==d;)f.push(e),e=C();if(f!==d)if(wb.test(g.charAt(c))?(e=g.charAt(c),c++):(e=d,0===l&&h(xb)),e!==d){k=[];for(n=C();n!==d;)k.push(n),n=C();if(k!==d){n=[];u=w=c;l++;y=r();l--;y===d?u=H:(c=u,u=m);u!==d?(y=c,l++,F=Q(),l--,F===d?y=H:(c=y,y=m),y!==d?(g.length>c?(F=g.charAt(c),c++):(F=d,0===l&&h(P)),F!==d?w=u=[u,y,F]:
(c=w,w=m)):(c=w,w=m)):(c=w,w=m);if(w!==d)for(;w!==d;)n.push(w),u=w=c,l++,y=r(),l--,y===d?u=H:(c=u,u=m),u!==d?(y=c,l++,F=Q(),l--,F===d?y=H:(c=y,y=m),y!==d?(g.length>c?(F=g.charAt(c),c++):(F=d,0===l&&h(P)),F!==d?w=u=[u,y,F]:(c=w,w=m)):(c=w,w=m)):(c=w,w=m);else n=m;if(n!==d){w=[];for(u=C();u!==d;)w.push(u),u=C();w!==d?(u=r(),u!==d?b=a=[a,f,e,k,n,w,u]:(c=b,b=m)):(c=b,b=m)}else c=b,b=m}else c=b,b=m}else c=b,b=m;else c=b,b=m}else c=b,b=m;b===d&&(b=D());return b}function B(){var b;123===g.charCodeAt(c)?
(b=yb,c++):(b=d,0===l&&h(zb));return b}function r(){var b;125===g.charCodeAt(c)?(b=Ab,c++):(b=d,0===l&&h(Bb));return b}function Q(){var b;10===g.charCodeAt(c)?(b=Cb,c++):(b=d,0===l&&h(Db));b===d&&(g.substr(c,2)===Ga?(b=Ga,c+=2):(b=d,0===l&&h(Eb)),b===d&&(13===g.charCodeAt(c)?(b=Fb,c++):(b=d,0===l&&h(Gb)),b===d&&(8232===g.charCodeAt(c)?(b=Hb,c++):(b=d,0===l&&h(Ib)),b===d&&(8233===g.charCodeAt(c)?(b=Jb,c++):(b=d,0===l&&h(Kb))))));return b}function C(){var b;Lb.test(g.charAt(c))?(b=g.charAt(c),c++):
(b=d,0===l&&h(Mb));b===d&&(b=Q());return b}function G(b){return b.concat([["line",A(x).line],["col",A(x).column]])}var M=1<arguments.length?arguments[1]:{},d={},ta={start:e},ua=e,Ha={type:"other",description:"section"},m=d,aa=null,H=void 0,pa="/",qa={type:"literal",value:"/",description:'"/"'},Qa=/^[#?\^<+@%]/,Ra={type:"class",value:"[#?\\^<+@%]",description:"[#?\\^<+@%]"},Ja={type:"other",description:"end tag"},na=":",oa={type:"literal",value:":",description:'":"'},Sa={type:"other",description:"params"},
va="=",wa={type:"literal",value:"=",description:'"="'},fa=function(b,a){return["param",["literal",b],a]},Ia={type:"other",description:"bodies"},Ua={type:"other",description:"reference"},Oa={type:"other",description:"partial"},Ka=">",La={type:"literal",value:">",description:'">"'},Ma="+",Na={type:"literal",value:"+",description:'"+"'},Ta={type:"other",description:"filters"},xa="|",ya={type:"literal",value:"|",description:'"|"'},Xa={type:"other",description:"special"},Va="~",Wa={type:"literal",value:"~",
description:'"~"'},Za={type:"other",description:"identifier"},ab={type:"other",description:"number"},$a={type:"other",description:"float"},ga=".",ha={type:"literal",value:".",description:'"."'},bb={type:"other",description:"unsigned_integer"},ia=/^[0-9]/,ja={type:"class",value:"[0-9]",description:"[0-9]"},eb={type:"other",description:"signed_integer"},cb="-",db={type:"literal",value:"-",description:'"-"'},fb={type:"other",description:"integer"},Ya={type:"other",description:"path"},ib={type:"other",
description:"key"},gb=/^[a-zA-Z_$]/,hb={type:"class",value:"[a-zA-Z_$]",description:"[a-zA-Z_$]"},za=/^[0-9a-zA-Z_$\-]/,Aa={type:"class",value:"[0-9a-zA-Z_$\\-]",description:"[0-9a-zA-Z_$\\-]"},nb={type:"other",description:"array"},ob={type:"other",description:"array_part"},pb={type:"other",description:"inline"},T='"',U={type:"literal",value:'"',description:'"\\""'},Pa={type:"other",description:"buffer"},P={type:"any",description:"any character"},qb={type:"other",description:"literal"},Ba=/^[^"]/,
Ca={type:"class",value:'[^"]',description:'[^"]'},Da='\\"',rb={type:"literal",value:'\\"',description:'"\\\\\\""'},tb={type:"other",description:"raw"},Ea="{`",sb={type:"literal",value:"{`",description:'"{`"'},V="`}",ra={type:"literal",value:"`}",description:'"`}"'},vb={type:"other",description:"comment"},Fa="{!",ub={type:"literal",value:"{!",description:'"{!"'},W="!}",sa={type:"literal",value:"!}",description:'"!}"'},wb=/^[#?\^><+%:@\/~%]/,xb={type:"class",value:"[#?\\^><+%:@\\/~%]",description:"[#?\\^><+%:@\\/~%]"},
yb="{",zb={type:"literal",value:"{",description:'"{"'},Ab="}",Bb={type:"literal",value:"}",description:'"}"'},jb="[",kb={type:"literal",value:"[",description:'"["'},lb="]",mb={type:"literal",value:"]",description:'"]"'},Cb="\n",Db={type:"literal",value:"\n",description:'"\\n"'},Ga="\r\n",Eb={type:"literal",value:"\r\n",description:'"\\r\\n"'},Fb="\r",Gb={type:"literal",value:"\r",description:'"\\r"'},Hb="\u2028",Ib={type:"literal",value:"\u2028",description:'"\\u2028"'},Jb="\u2029",Kb={type:"literal",
value:"\u2029",description:'"\\u2029"'},Lb=/^[\t\x0B\f \xA0\uFEFF]/,Mb={type:"class",value:"[\\t\\x0B\\f \\xA0\\uFEFF]",description:"[\\t\\x0B\\f \\xA0\\uFEFF]"},c=0,x=0,Z=0,la={line:1,column:1,seenCR:!1},ea=0,ma=[],l=0,ka;if("startRule"in M){if(!(M.startRule in ta))throw Error("Can't start parsing from rule \""+M.startRule+'".');ua=ta[M.startRule]}ka=ua();if(ka!==d&&c===g.length)return ka;ka!==d&&c<g.length&&h({type:"end",description:"end of input"});throw u(null,ma,ea);}}}();A.parse=t.parse;return t});
(function(A,t){"function"===typeof define&&define.amd&&!0===define.amd.dust?define("dust.compile",["dust.core","dust.parse"],function(v,g){return t(g,v).compile}):"object"===typeof exports?module.exports=t(require("./parser").parse,require("./dust")):t(A.dust.parse,A.dust)})(this,function(A,t){function v(a,f){var e=[f[0]],g,h,u;g=1;for(h=f.length;g<h;g++)(u=n.filterNode(a,f[g]))&&e.push(u);return e}function g(a,f){return f}function N(){}function h(a,f){var e="",g,h;g=1;for(h=f.length;g<h;g++)e+=n.compileNode(a,
f[g]);return e}function u(a,f,e){return"."+(t._aliases[e]||e)+"("+n.compileNode(a,f[1])+","+n.compileNode(a,f[2])+","+n.compileNode(a,f[4])+","+n.compileNode(a,f[3])+")"}function e(a){return function(f,e){return t[e?"render":"stream"](a,f,e)}}var n={},a=t.isArray;n.compile=function(a,f){try{var g=A(a),h;var u=n.filterNode({},g),g={name:f,bodies:[],blocks:{},index:0,auto:"h"},v=t.escapeJs(f),K=f?'"'+v+'",':"",I="function(dust){",D=n.compileNode(g,u),E;f&&(I+='dust.register("'+v+'",'+D+");");var u=
I,b;var v=[],B=g.blocks,r;for(r in B)v.push('"'+r+'":'+B[r]);v.length?(g.blocks="ctx=ctx.shiftBlocks(blocks);",b="var blocks={"+v.join(",")+"};"):(g.blocks="",b=g.blocks);var L,B=[],C=g.bodies,G=g.blocks,M,d;M=0;for(d=C.length;M<d;M++)B[M]="function body_"+M+"(chk,ctx){"+G+"return chk"+C[M]+";}body_"+M+".__dustBody=!0;";L=B.join("");I=u+(b+L+"return "+D+"}");E="("+I+"(dust));";h=t.config.amd?"define("+K+'["dust.core"],'+I+");":t.config.cjs?"module.exports=function(dust){var tmpl="+E+"var f="+e().toString()+
";f.template=tmpl;return f}":E;return h}catch(J){if(!J.line||!J.column)throw J;throw new SyntaxError(J.message+" At line : "+J.line+", column : "+J.column);}};n.filterNode=function(a,f){return n.optimizers[f[0]](a,f)};n.optimizers={body:function(a,f){var e=[f[0]],g,h,u,t;h=1;for(u=f.length;h<u;h++)if(t=n.filterNode(a,f[h]))"buffer"===t[0]||"format"===t[0]?g?(g[0]="buffer"===t[0]?"buffer":g[0],g[1]+=t.slice(1,-2).join("")):(g=t,e.push(t)):(g=null,e.push(t));return e},buffer:g,special:function(a,f){return["buffer",
K[f[1]],f[2],f[3]]},format:function(a,f){return t.config.whitespace?(f.splice(1,2,f.slice(1,-2).join("")),f):null},reference:v,"#":v,"?":v,"^":v,"<":v,"+":v,"@":v,"%":v,partial:v,context:v,params:v,bodies:v,param:v,filters:g,key:g,path:g,literal:g,raw:g,comment:N,line:N,col:N};n.pragmas={esc:function(a,f,e){var g=a.auto;f||(f="h");a.auto="s"===f?"":f;f=h(a,e.block);a.auto=g;return f}};var K={s:" ",n:"\n",r:"\r",lb:"{",rb:"}"};n.compileNode=function(a,f){return n.nodes[f[0]](a,f)};n.nodes={body:function(a,
f){var e=a.index++,g="body_"+e;a.bodies[e]=h(a,f);return g},buffer:function(a,f){return".w("+L(f[1])+")"},format:function(a,f){return".w("+L(f[1])+")"},reference:function(a,f){return".f("+n.compileNode(a,f[1])+",ctx,"+n.compileNode(a,f[2])+")"},"#":function(a,f){return u(a,f,"section")},"?":function(a,f){return u(a,f,"exists")},"^":function(a,f){return u(a,f,"notexists")},"<":function(a,f){for(var e=f[4],g=1,h=e.length;g<h;g++){var u=e[g];if("block"===u[1][1]){a.blocks[f[1].text]=n.compileNode(a,
u[2]);break}}return""},"+":function(a,f){return"undefined"===typeof f[1].text&&"undefined"===typeof f[4]?".b(ctx.getBlock("+n.compileNode(a,f[1])+",chk, ctx),"+n.compileNode(a,f[2])+", {},"+n.compileNode(a,f[3])+")":".b(ctx.getBlock("+L(f[1].text)+"),"+n.compileNode(a,f[2])+","+n.compileNode(a,f[4])+","+n.compileNode(a,f[3])+")"},"@":function(a,f){return".h("+L(f[1].text)+","+n.compileNode(a,f[2])+","+n.compileNode(a,f[4])+","+n.compileNode(a,f[3])+")"},"%":function(a,f){var e=f[1][1],g,h,u,t,v,K;
if(!n.pragmas[e])return"";g=f[4];h={};v=1;for(K=g.length;v<K;v++)u=g[v],h[u[1][1]]=u[2];g=f[3];u={};v=1;for(K=g.length;v<K;v++)t=g[v],u[t[1][1]]=t[2][1];return n.pragmas[e](a,f[2][1]?f[2][1].text:null,h,u)},partial:function(a,f){return".p("+n.compileNode(a,f[1])+",ctx,"+n.compileNode(a,f[2])+","+n.compileNode(a,f[3])+")"},context:function(a,f){return f[1]?"ctx.rebase("+n.compileNode(a,f[1])+")":"ctx"},params:function(a,f){for(var e=[],g=1,h=f.length;g<h;g++)e.push(n.compileNode(a,f[g]));return e.length?
"{"+e.join(",")+"}":"{}"},bodies:function(a,f){for(var e=[],g=1,h=f.length;g<h;g++)e.push(n.compileNode(a,f[g]));return"{"+e.join(",")+"}"},param:function(a,e){return n.compileNode(a,e[1])+":"+n.compileNode(a,e[2])},filters:function(a,e){for(var g=[],h=1,n=e.length;h<n;h++)g.push('"'+e[h]+'"');return'"'+a.auto+'"'+(g.length?",["+g.join(",")+"]":"")},key:function(a,e){return'ctx.get(["'+e[1]+'"], false)'},path:function(e,f){for(var g=f[1],h=f[2],u=[],t=0,v=h.length;t<v;t++)a(h[t])?u.push(n.compileNode(e,
h[t])):u.push('"'+h[t]+'"');return"ctx.getPath("+g+", ["+u.join(",")+"])"},literal:function(a,e){return L(e[1])},raw:function(a,e){return".w("+L(e[1])+")"}};var I=/\\/g,E=/"/g,D=/\f/g,O=/\n/g,J=/\r/g,R=/\t/g,L="undefined"===typeof JSON?function(a){return'"'+a.replace(I,"\\\\").replace(E,'\\"').replace(D,"\\f").replace(O,"\\n").replace(J,"\\r").replace(R,"\\t")+'"'}:JSON.stringify;t.compiler=n;t.compile=t.compiler.compile;t.renderSource=function(a,f,g){a=t.loadSource(t.compile(a));return e(a)(f,g)};
t.compileFn=function(a,f){var g=t.loadSource(t.compile(a,f));return e(g)};t.filterNode=n.filterNode;t.optimizers=n.optimizers;t.pragmas=n.pragmas;t.compileNode=n.compileNode;t.nodes=n.nodes;return n});"function"===typeof define&&define.amd&&!0===define.amd.dust&&define(["require","dust.core","dust.compile"],function(A,t){t.onLoad=function(t,g){A([t],function(){g()})};return t});
(function(A){function t(g){g=g.current();return"object"===typeof g&&!0===g.isSelect}function v(g,e){return"function"===typeof e?e.toString().replace(/(^\s+|\s+$)/mg,"").replace(/\n/mg,"").replace(/,\s*/mg,", ").replace(/\)\{/mg,") {"):e}function g(g,e,n,a,v){a=a||{};var I=n.block,E,D,O=a.filterOpType||"";if("undefined"!==typeof a.key)E=A.helpers.tap(a.key,g,e);else if(t(e))E=e.current().selectKey,e.current().isResolved&&(v=function(){return!1});else return h.log("No key specified for filter in:"+
O+" helper "),g;D=A.helpers.tap(a.value,g,e);if(v(N(D,a.type,e),N(E,a.type,e))){t(e)&&(e.current().isResolved=!0);if(I)return g.render(I,e);h.log("Missing body block in the "+O+" helper ")}else if(n["else"])return g.render(n["else"],e);return g}function N(g,e,h){if(g)switch(e||typeof g){case "number":return+g;case "string":return String(g);case "boolean":return Boolean("false"===g?!1:g);case "date":return new Date(g);case "context":return h.get(g)}return g}var h="undefined"!==typeof console?console:
{log:function(){}};A.helpers={tap:function(g,e,h){var a=g;"function"===typeof g&&(!0===g.isFunction?a=g():(a="",e.tap(function(e){a+=e;return""}).render(g,h).untap(),""===a&&(a=!1)));return a},sep:function(g,e,h){return e.stack.index===e.stack.of-1?g:h.block?h.block(g,e):g},idx:function(g,e,h){return h.block?h.block(g,e.push(e.stack.index)):g},contextDump:function(g,e,n,a){a=a||{};n=a.to||"output";a=a.key||"current";n=A.helpers.tap(n,g,e);a=A.helpers.tap(a,g,e);e="full"===a?JSON.stringify(e.stack,
v,2):JSON.stringify(e.stack.head,v,2);return"console"===n?(h.log(e),g):g.write(e)},"if":function(g,e,n,a){var t=n.block,v=n["else"];if(a&&a.cond){a=a.cond;a=A.helpers.tap(a,g,e);if(eval(a)){if(t)return g.render(n.block,e);h.log("Missing body block in the if helper!");return g}if(v)return g.render(n["else"],e)}else h.log("No condition given in the if helper!");return g},math:function(g,e,n,a){if(a&&"undefined"!==typeof a.key&&a.method){var t=a.key,v=a.method,E=a.operand;a=a.round;var D=null,t=A.helpers.tap(t,
g,e),E=A.helpers.tap(E,g,e);switch(v){case "mod":0!==E&&-0!==E||h.log("operand for divide operation is 0/-0: expect Nan!");D=parseFloat(t)%parseFloat(E);break;case "add":D=parseFloat(t)+parseFloat(E);break;case "subtract":D=parseFloat(t)-parseFloat(E);break;case "multiply":D=parseFloat(t)*parseFloat(E);break;case "divide":0!==E&&-0!==E||h.log("operand for divide operation is 0/-0: expect Nan/Infinity!");D=parseFloat(t)/parseFloat(E);break;case "ceil":D=Math.ceil(parseFloat(t));break;case "floor":D=
Math.floor(parseFloat(t));break;case "round":D=Math.round(parseFloat(t));break;case "abs":D=Math.abs(parseFloat(t));break;default:h.log("method passed is not supported")}if(null!==D)return a&&(D=Math.round(D)),n&&n.block?g.render(n.block,e.push({isSelect:!0,isResolved:!1,selectKey:D})):g.write(D)}else h.log("Key is a required parameter for math helper along with method/operand!");return g},select:function(g,e,n,a){var t=n.block;if(a&&"undefined"!==typeof a.key){a=A.helpers.tap(a.key,g,e);if(t)return g.render(n.block,
e.push({isSelect:!0,isResolved:!1,selectKey:a}));h.log("Missing body block in the select helper ")}else h.log("No key given in the select helper!");return g},eq:function(h,e,n,a){a&&(a.filterOpType="eq");return g(h,e,n,a,function(a,e){return e===a})},ne:function(h,e,n,a){return a?(a.filterOpType="ne",g(h,e,n,a,function(a,e){return e!==a})):h},lt:function(h,e,n,a){if(a)return a.filterOpType="lt",g(h,e,n,a,function(a,e){return e<a})},lte:function(h,e,n,a){return a?(a.filterOpType="lte",g(h,e,n,a,function(a,
e){return e<=a})):h},gt:function(h,e,n,a){return a?(a.filterOpType="gt",g(h,e,n,a,function(a,e){return e>a})):h},gte:function(h,e,n,a){return a?(a.filterOpType="gte",g(h,e,n,a,function(a,e){return e>=a})):h},"default":function(h,e,n,a){a&&(a.filterOpType="default");return g(h,e,n,a,function(a,e){return!0})},size:function(g,e,h,a){e=0;var t;a=a||{};if((a=a.key)&&!0!==a)if(A.isArray(a))e=a.length;else if(!isNaN(parseFloat(a))&&isFinite(a))e=a;else if("object"===typeof a)for(t in e=0,a)Object.hasOwnProperty.call(a,
t)&&e++;else e=(a+"").length;else e=0;return g.write(e)}}})("undefined"!==typeof exports?module.exports=require("dustjs-linkedin"):dust);